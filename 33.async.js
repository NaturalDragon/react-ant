(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{"J/MW":function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n("Y/ft")),r=l(n("eHn4")),i=l(n("p0pE")),d=l(n("2Taf")),u=l(n("vZ4D")),s=l(n("MhPg")),c=l(n("l4Ni")),f=l(n("ujKo")),m=a(n("q1tI")),p=l(n("i8i4")),_=l(n("Emxu"));function h(e){var t=w();return function(){var n,a=(0,f.default)(e);if(t){var l=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,l)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var v={resizable:!0},g=function(e){(0,s.default)(n,e);var t=h(n);function n(e){var a;return(0,d.default)(this,n),a=t.call(this,e),a.onScroll=function(e){var t=a.state,n=t.page,l=t.page_size,o=(t.textValue,t.isLoad),r=35,i=e.scrollDirection,d=e.scrollTop,u=n*l*r;console.log(u-d),"downwards"===i&&u-d<1e3&&!1===o&&a.setState({isLoad:!0})},a.onChange=function(e){var t=e.target.value;a.state.page=1,a.setState({candidateRows:[{fsMaterialId:"654326",fsMaterialName:"\u6d4b\u8bd5SPU20191203-002\u9ec416",unit:"\u6839",goods_id:"59650",extended_information:"\u9ec416",buy_price:"8.00",code:"csSPU20191203-002h16",last_price:8,stock_num:null,freeze_num:null},{fsMaterialId:"654325",fsMaterialName:"\u6d4b\u8bd520191203-001\u7eff16",unit:"\u6839",goods_id:"59641",extended_information:"\u7eff16",buy_price:"8.00",code:"cs20191203-001l16",last_price:8,stock_num:null,freeze_num:null},{fsMaterialId:"000001",fsMaterialName:"\u6d4b\u8bd520191203\u7eff16",unit:"\u6839",goods_id:"59621",extended_information:"\u7eff16",buy_price:"8.00",code:"cs20191203l16",last_price:8,stock_num:null,freeze_num:null},{fsMaterialId:"000001",fsMaterialName:"\u6d4b\u8bd5SPU20191202-01\u91d1\u9ec416",unit:"\u6839",goods_id:"59613",extended_information:"\u91d1\u9ec416",buy_price:"8.00",code:"csSPU20191202-01jh16",last_price:8,stock_num:null,freeze_num:null},{fsMaterialId:"000001",fsMaterialName:"\u6d4b\u8bd5SPU20191126\u571f\u9ec41\u7c73",unit:"\u6839",goods_id:"59572",extended_information:"\u571f\u9ec41\u7c73",buy_price:"8.00",code:"csSPU20191126th1m",last_price:8,stock_num:null,freeze_num:null},{fsMaterialId:"002902",fsMaterialName:"\u4f1f\u661f\u51b7\u70ed\u6c34\u7ba1 20*2.8 \u6854 4\u7c73",unit:"\u6839",goods_id:"59570",extended_information:"20*2.8 \u6854 4\u7c73",buy_price:"1.00",code:"wxlrsg20*2.8j4m",last_price:1,stock_num:null,freeze_num:null},{fsMaterialId:"002901",fsMaterialName:"\u4f1f\u661f\u51b7\u70ed\u6c34\u7ba1 32*4.4 \u7eff 4\u7c73",unit:"\u6839",goods_id:"59569",extended_information:"32*4.4 \u7eff 4\u7c73",buy_price:"1.00",code:"wxlrsg32*4.4l4m",last_price:1,stock_num:null,freeze_num:null},{fsMaterialId:"000200",fsMaterialName:"\u4f1f\u661f\u51b7\u70ed\u6c34\u7ba1 25*3.5 \u7eff 4\u7c73",unit:"\u6839",goods_id:"59568",extended_information:"25*3.5 \u7eff 4\u7c73",buy_price:"1.00",code:"wxlrsg25*3.5l4m/g",last_price:1,stock_num:null,freeze_num:null},{fsMaterialId:"000199",fsMaterialName:"\u4f1f\u661f\u51b7\u70ed\u6c34\u7ba1 20*2.8 \u7eff 4\u7c73",unit:"\u6839",goods_id:"59567",extended_information:"20*2.8 \u7eff 4\u7c73",buy_price:"1.00",code:"wxlrsg20*2.8l4m",last_price:1,stock_num:null,freeze_num:null},{fsMaterialId:"007467",fsMaterialName:"\u98de\u5229\u6d66\u4e09\u901a 20 \u7eff ",unit:"\u4e2a",goods_id:"58865",extended_information:"20",buy_price:"1.00",code:"flpst20l",last_price:1,stock_num:null,freeze_num:null}],page:1,textValue:t,isLoad:!1})},a.onGridRowsUpdated=function(e){var t=e.fromRow,n=e.toRow,l=e.updated;a.setState(function(e){for(var o=a.state.rows.slice(),r=t;r<=n;r++)o[r]=(0,i.default)({},o[r],l);return{rows:o}})},console.log(e),a.state={textValue:"",selectIndex:0,newValue:"",candidateRows:[],page:1,page_size:10,isLoad:!1,columnsCandidate:[{key:"fsMaterialId",name:"\u7269\u6599\u4ee3\u7801"},{key:"fsMaterialName",name:"\u5b58\u8d27\u540d\u79f0"},{key:"code",name:"\u52a9\u8bb0\u7801"},{key:"extended_information",name:"\u89c4\u683c\u578b\u53f7"},{key:"last_price",name:"\u4e0a\u6b21\u91c7\u8d2d\u4ef7"},{key:"stock_num",name:"\u73b0\u5b58\u91cf"},{key:"freeze_num",name:"\u51bb\u7ed3\u6570\u91cf"}].map(function(e){return(0,i.default)({},e,v)})},a}return(0,u.default)(n,[{key:"componentDidMount",value:function(){}},{key:"getValue",value:function(){var e,t=this.state.selectIndex;if(this.state.candidateRows.length-1<t)return!1;var n=this.state.candidateRows[t];if(!n)return!1;var a=n.fsMaterialName,l=n.last_price,o=n.extended_information,i=n.goods_short_name,d=n.code,u=n.unit,s=n.goods_id,c=n.fsMaterialId;return e={},(0,r.default)(e,this.props.column.key,a),(0,r.default)(e,"goods_id",s),(0,r.default)(e,"unit",u),(0,r.default)(e,"purchase_price",l),(0,r.default)(e,"extended_information",o),(0,r.default)(e,"goods_short_name",i),(0,r.default)(e,"code",d),(0,r.default)(e,"fsMaterialId",c),e}},{key:"getInputNode",value:function(){var e=p.default.findDOMNode(this).getElementsByTagName("input")[0];return e.selectionStart=e.selectionEnd=-1,e}},{key:"render",value:function(){var e=this,t=function(t){var n=t.renderBaseRow,a=(0,o.default)(t,["renderBaseRow"]),l=a.idx===e.state.selectIndex?"darkorange":"blue";return m.default.createElement("div",{style:{color:l}},n(a))},n=40,a=38,l=function(t){var l=e.state.selectIndex,o=e.state.candidateRows.length-1;return"undefined"===typeof l?0:"undefined"===typeof o?0:t===n?l>=o?0:l+1:t===a?l<=0?o:l-1:l},r=function(t){var o=t.keyCode;if(o===n){t.preventDefault(),t.stopPropagation();var r=l(o);return e.setState({selectIndex:r}),!1}if(o===a){t.preventDefault(),t.stopPropagation();var i=l(o);return e.setState({selectIndex:i}),!1}return!1},i=function(t){var n=t.rowIdx,a=t.idx,l=n;e.setState({selectIndex:l},function(){return e.props.onCommit()}),console.log("handleCellSe11lected",n,a)};return m.default.createElement("div",null,m.default.createElement("input",{onChange:this.onChange,defaultValue:this.props.value,style:{width:"100%",height:"35px"},onKeyDown:r}),m.default.createElement("div",{style:{position:"absolute",width:"800px",left:"0px",zIndex:1e3,color:"red",overflow:"auto",overflowY:"scroll"}},m.default.createElement(_.default,{scrollToRowIndex:this.state.selectIndex,rowRenderer:t,onGridKeyDown:this.handleGridKeyDown,onCellSelected:i,columns:this.state.columnsCandidate,rowGetter:function(t){return e.state.candidateRows[t]},rowsCount:this.state.candidateRows.length,onGridRowsUpdated:this.onGridRowsUpdated,onScroll:this.onScroll,enableCellAutoFocus:!1,enableCellSelect:!0})))}}]),n}(m.PureComponent),y=g;t.default=y},S49u:function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("IzEo");var o=l(n("bx4M"));n("Pwec");var r=l(n("CtXQ")),i=l(n("gWZ8")),d=l(n("p0pE")),u=l(n("2Taf")),s=l(n("vZ4D")),c=l(n("MhPg")),f=l(n("l4Ni")),m=l(n("ujKo"));n("OaEy");var p=l(n("2fM7")),_=a(n("q1tI")),h=l(n("Emxu")),w=l(n("J/MW"));function v(e){var t=g();return function(){var n,a=(0,m.default)(e);if(t){var l=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,l)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var y=p.default.Option,x=_.default.createElement(p.default,{defaultValue:"lucy",style:{width:120}},_.default.createElement(y,{value:"jack"},"Jack"),_.default.createElement(y,{value:"lucy"},"Lucy"),_.default.createElement(y,{value:"disabled",disabled:!0},"Disabled"),_.default.createElement(y,{value:"Yiminghe"},"yiminghe")),I=function(e){(0,c.default)(n,e);var t=v(n);function n(e){var a;(0,u.default)(this,n),a=t.call(this,e),a.createRows=function(){for(var e=[],t=1;t<4e3;t++)e.push({_ID:t,id:t,fsMaterialId:"code-".concat(t),fsMaterialName:"\u7269\u6599\u540d\u79f0-".concat(t),component:t});return e},a.handleCellSelected=function(e,t){var n=e.rowIdx;a.setState({selectIndex:n})},a.onGridRowsUpdated=function(e){var t=e.fromRow,n=e.toRow,l=e.updated;a.setState(function(e){for(var o=a.state.rows.slice(),r=t;r<=n;r++)o[r]=(0,d.default)({},o[r],l);return{rows:o}})},a.handleGridKeyDown=function(e){var t=e.keyCode,n=a.state,l=n.rows,o=n.selectIndex,r=l[l.length-1].id;40===t&&+o===+r&&a.addRow()},a.addRow=function(){var e=a.state.rows;e.pop();var t={_ID:e.length,id:e.length,fsMaterialName:"",component:""},n={_ID:"+",id:e.length+1};a.setState({rows:[].concat((0,i.default)(e),[t,n])})},a.deleteRow=function(e){console.log("\u5220\u9664\u884c\u7684id",e);var t=a.state.rows;console.log(t);var n=t.filter(function(t){return+t.id!==+e});console.log(n),a.setState({rows:n.map(function(e,t){return e.id=t,"+"!==e._ID&&(e._ID=t),e})})},a.getCellActions=function(e,t){r.default};var l=function(e){var t=e.value;return _.default.createElement("div",{style:{textAlign:"center"}},"+"===t?_.default.createElement(r.default,{type:"plus",onClick:a.addRow,style:{fontSize:"24px"}}):_.default.createElement(r.default,{type:"delete",onClick:function(){return a.deleteRow(t)},style:{fontSize:"20px"}}))},o=[{key:"_ID",width:50,name:"\u64cd\u4f5c",formatter:l,frozen:!0},{key:"id",width:50,name:"\u5e8f\u6570",frozen:!0},{key:"fsMaterialId",width:100,name:"\u7269\u6599\u4ee3\u7801",editor:w.default},{key:"fsMaterialName",width:200,name:"\u7269\u6599\u540d\u79f0",editor:w.default,resizable:!0},{key:"purchase_price",width:100,name:"\u4ef7\u683c",editable:!0,resizable:!0},{key:"component",width:200,name:"component",formatter:x}],s=[].concat((0,i.default)(a.createRows()),[{_ID:"+",id:"4000"}]);return a.state={selectIndex:0,rows:s,columns:o},a}return(0,s.default)(n,[{key:"render",value:function(){var e=_.default.createElement("a",{href:"https://adazzle.github.io/react-data-grid/docs/examples/simple-grid",target:"_blank"},"React Data Grid"),t=this.state,n=t.rows,a=t.columns;return _.default.createElement(o.default,{title:e,bordered:!0,style:{minHeight:"calc(100vh)"}},_.default.createElement("div",{style:{width:"100%"}},_.default.createElement(h.default,{columns:a,rowGetter:function(e){return n[e]},rowsCount:n.length,onCellSelected:this.handleCellSelected,onGridRowsUpdated:this.onGridRowsUpdated,onGridKeyDown:this.handleGridKeyDown,getCellActions:this.getCellActions,enableCellSelect:!0,dragable:!0,minHeight:500})))}}]),n}(_.Component);t.default=I}}]);